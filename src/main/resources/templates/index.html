<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head>
  <title>BBS demo</title>
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-iYQeCzEYFbKjA/T2uDLTpkwGzCiq6soy8tYaI1GyVh/UjpbCx/TYkiZhlZB6+fzT" crossorigin="anonymous">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.9.1/font/bootstrap-icons.css">
  <link rel="stylesheet" href="css/community.css">
  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.1/dist/js/bootstrap.bundle.min.js" integrity="sha384-u1OknCvxWvY5kfmNBILK2hRnQC3Pr17a+RTT6rIHI7NnikvbZlHgTPOOmMi466C8" crossorigin="anonymous"></script>
</head>

<script type="application/javascript">
    window.onload = function () {
        var closable = window.localStorage.getItem("closable");
        if (closable == "true") {
            window.localStorage.removeItem("closable");
            window.close();
        }
    }
</script>

<body>

<div th:insert="~{navigation :: nav}"></div>

<div class="container-fluid">
  <div class="row" style="margin: 30px;">
    <div class="col-xl-9 col-12">
      <h2>
        <i class="bi bi-card-list"></i>
        帖子
      </h2>
      <hr>
      <div class="d-flex list-info"  th:each="post : ${pagination.data}">
        <div class="flex-shrink-0">
          <img th:src="${post.user.avatarUrl}" class="avatar">
        </div>
        <div class="flex-grow-1 ms-3">
          <h5 ><a th:text="${post.title}" th:href="@{'/postDetail/'+${post.id}}" class="post-href"></a></h5>
          <div class="d-flex flex-row bd-highlight">
            <div class="p-2 bd-highlight">
              <i class="bi bi-eye"></i>
              <span class="list-text-info ms-1" th:text="${post.viewCount}"></span>
            </div>
            <div class="p-2 bd-highlight">
              <i class="bi bi-chat"></i>
              <span class="list-text-info ms-1" th:text="${post.commentCount}"></span>
            </div>
            <div class="p-2 bd-highlight">
              <i class="bi bi-hand-thumbs-up"></i>
              <span class="list-text-info ms-1" th:text="${post.likeCount}"></span>
            </div>
            <div class="p-2 bd-highlight">
              <i class="bi bi-clock"></i>
              <span class="list-text-info ms-1" th:text="${#calendars.format(post.gmtCreate,'yyyy-MM-dd HH:mm')}"></span>
            </div>
          </div>
        </div>
      </div>
      <nav aria-label="Page navigation example">
        <ul class="pagination">
          <li class="page-item" th:if="${pagination.showFirst}">
            <a class="page-link" href="/?page=1" aria-label="First">
              <span aria-hidden="true">&laquo;</span>
            </a>
          </li>
          <li class="page-item" th:if="${pagination.showPrevious}">
            <a class="page-link" th:href="@{/(page=${pagination.currentPage - 1})}" aria-label="Previous">
              <span aria-hidden="true">&lt;</span>
            </a>
          </li>
          <li class="page-item" th:each="page : ${pagination.pages}" th:class="${pagination.currentPage == page}? 'active' : ''">
            <a class="page-link" th:href="@{/(page=${page})}" th:text="${page}"></a>
          </li>
          <li class="page-item" th:if="${pagination.showNext}">
            <a class="page-link" th:href="@{/(page=${pagination.currentPage + 1})}" aria-label="Next">
              <span aria-hidden="true">&gt;</span>
            </a>
          </li>
          <li class="page-item" th:if="${pagination.showEnd}">
            <a class="page-link" th:href="@{/(page=${pagination.totalPages})}" aria-label="End">
              <span aria-hidden="true">&raquo;</span>
            </a>
          </li>
        </ul>
      </nav>
    </div>
    <div class="col-xl-3 col-12">
      <h3>热门话题</h3>
    </div>
  </div>
</div>

</body>
</html>